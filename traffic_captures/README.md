# ICMP Traffic Captures
This directory contains several traffic captures whose packets have been
generated by sending a single ICMP Echo request from `client-a` to `client-b`.

Bear in mind that in order to have a clear view of both the physical (i.e. real)
and logical (i.e. VPN) topologies we are dealing with we cannot recommend taking
a look at the accompanying PDF presentation enough. Take a look at the root
[`README.md`](../README.md) for more info on that.

## NAT-based access control
The first two traces have been captured when we pinged `client-b` whilst forcing
traffic directed from `client-a` to `client-b` to be realyed through the VPN. As
explained in the slides, this can be achived by running the following on `client-a`:

    vagrant@client-a$ sudo ip r add 10.0.123.4/32 dev wg0

The `ping` invocation itself was:

    vagrant@client-a$ ping -c 1 10.0.123.4

The packets sent on the 'physical' network are contained in `nat-ping-physical.pcap`.
The ones seen on the 'logical' topology can be found in `nat-ping-logical.pcap`.

The slides contain an animated and comprehensive schematic of what's going on starting
on slide 119!

## VPN-based access control
In this case we're just trying to send ICMP messages to `client-b` within the context
of the VPN. This requires that both nodes belong to said VPN **before** we try to
run `ping`!

The command we used to generate the trace is:

    vagrant@client-a$ ping -c 1 192.168.4.3

Just like before, packets belonging to the 'physical' topology can be queried on
`vpn-ping-physical.pcap` whilst those associated to the 'logical' topology can
be found on `vpn-ping-logical.pcap`.

You can also find an animated and comprehensive diagram on what's happening behind
the scenes in this case beginning on slide 161 of the accompanying documentation.

Happy WireSharking!
